<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BuscaMInas</title>
</head>
<body>
    <!-- CSS (Estilos)-->
    <style>

        *{
            transition: all 1s;
            box-sizing: border-box;
        }

        body{
            font-family: calibri;
            margin:0;
            padding: 0;
            user-select: none;
            background: lightsteelblue;
        }

        table{
            background: slategray;
            margin: auto;
        }

        td{
            border: rgba(0, 0, 0, 0.25) 1px solid;
        }


    </style>

    <!-- HTML (Estructura)-->
    <table cellspacing = 0 cellpadding = 0 id="tablero">
     
        
    </table>

    <!-- JS (LÃ³gica)-->
    <script>

        let filas = 20
        let columnas = 20
        let lado = 30

        let minas = filas*columnas*0.15;

        let tablero = []

        nuevoJuego()

        function nuevoJuego(){
            generarTableroHTML()
            generarTableroJuego()
            refrescarTablero()
        }

        function generarTableroHTML() {
            let html = ""
            for(let f = 0; f < filas; f++){
                html += '<tr>'
                for(let c = 0; c < columnas; c++){
                    html += '<td style "width:$(lado)px;height:$(lado)px">'
                    html += '</td>'

            }
            html += '</tr>'
        }
        let tableroHTML = document.getElementById("tablero")
        tableroHTML.innerHTML = html
        tableroHTML.style.width = columnas*lado+"px"
        tableroHTML.style.height = filas*lado+"px"
        }

        function refrescarTablero() {
            
        }

        function generarTableroJuego(params){
            vaciarTablero()//vaciar tablero, no interferencias
            ponerMinas()//Poner minas, -1
            contadoresMinas()//Poner contadoresd de minas

            function vaciarTablero(){
                tablero = []
                for(let c = 0; c<columnas; c++){
                    tablero.push([])
                }

            }

            function ponerMinas(){
                for(let i = 0; i < minas; i++){
                    let c
                    let f
                    do {

                        c = Math.floor(Math.random()*columnas)
                        f = Math.floor(Math.random()*filas)
                        
                    } while (tablero[c][f]); //Verifica que no haya mina en esa pos
                    tablero[c][f] = {valor: -1}

                }

            }

            function contadoresMinas(){
                for(let f = 0; f < filas; f++){
                    for(let c = 0; c < columnas; c++){
                        if(!tablero[c][f]){
                            tablero[c][f] = {valor: 0}
                        }
                    

                    }


                }

        }

    }




    </script>


</body>
</html>